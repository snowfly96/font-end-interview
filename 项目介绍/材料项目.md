### 设计需求

#### 背景

材料学和工程领域，大量材料数据需要收集、整理、分析和共享（**样品数据、研发数据和应用数据**）

材料数据的词汇和模板不统一，使得材料数据的使用和共享变得非常困难（个人和单位记录的实验数据的标准模板不一致，对材料数据的词汇描述不统一）

#### 需求

1. 材料数据平台需要具备**收集、存储和共享**大量材料实验数据、研发数据和应用数据的能力
2. 材料数据平台需要能够**标准化材料数据中词汇和模板**的能力，确保数据的质量和可靠性
3. 材料数据平台需要提供**标准词汇和标准模版的提交审核**（**自定义词汇和模板不进入标准模板共享库**/审核通过后成为标准词汇和标准模板进行标准共享库）
4. 材料数据平台需要提供便捷的**数据查询、筛选和可视化等接口**（标准词汇和模板，从标准共享库中获取），研究者可以共享平台共享数据，提高工作效率

#### 关键词

1. 样品数据：对样品进行属性描述（样品信息），化学成分和物理固有特性
2. 研发数据：对样品进行各种化学、力学和热力学实验，对实验数据进行记录（包含表征实验/性能试验）
3. 应用数据：材料被用于实际场景（材料信息），记录力学性能、物理性能和化学性能（外键连接性能分析表格）

![image-20230406142448133](/Users/snowfly96/Library/Application Support/typora-user-images/image-20230406142448133.png)



### 项目架构

#### 通用架构

#### 项目架构

> 分为三层：表现层、业务逻辑层、数据访问层

#### 表现层

> 1. 提供用户界面，展示数据和结果
> 2. 接收用户输入，验证输入数据的合法性
> 3. 提供用户操作和反馈

#### 业务逻辑层

> 1. 对用户进行认证、授权和访问控制
> 2. 定义业务逻辑的规则和算法，例如数据处理、计算和分析等
> 3. 封装数据访问层的访问接口
> 4. 验证用户输入数据的正确性和合法性，确保数据的安全性
> 5. 处理数据、生成分析报告，提供分析和可视化功能反馈

#### 数据访问层

> 1. 封装与数据库的交互过程
> 2. 维护数据库的访问接口
> 3. 维护数据的安全性和完整性，确保数据的一致性
> 4. 管理数据库连接和事物，提高数据库访问的性能和可靠性



### 材料平台架构

>  用户平台和管理员平台

#### 表现层（前端）

> 1. 提供用户界面，包括登陆、主页、数据查询和数据提交等页面
> 2. 提供标准词汇和模板，用户可以查询和选择（数据的规范化）
> 3. 提供自定义模板的编辑和提交功能，支持多种数据类型和格式；用户自定义的词汇和模板在提交审核通过之后可以作为共享的标准词汇和模板
> 4. 提供数据可视化功能和支持对数据进行分析展示

#### 业务逻辑层（后端）

> 1. 对用户进行管理、数据查询等交互进行数据处理
> 2. 对数据提交进行处理，支持数据的验证和规范化
> 3. 提供权限管理功能，包括用户认证、授权和访问控制

#### 数据访问层（后端）

> 1. 对数据库进行管理和维护功能，包括数据导入、数据备份和数据恢复等
> 2. 维护数据的安全性和完整性，确保数据的一致性



### 难点

#### 数据的规范化和处理

> 材料数据涉及到多种类型的数据，如材料样品信息、实验记录、生成材料信息等，需要对不同类型的数据尽心规范化处理，保证数据的准确性和一致性
>
> 1. 数据清洗：对数据进行识别、纠正和删除或者修正错误、不完整、不一致或者不准确的操作
> 2. 数据去重：对数据进行识别、筛选和删除重复的记录的操作（对于重复提交的标准词汇或者模板进行识别）
> 3. 数据标准化：同一数据的格式，规范化处理，提高数据的一致性和可比性（如对同一个样品规范化称呼）
> 4. 数据转化：数据格式的转变方便存储和查询
> 5. 数据聚合：将多个数据合并成一个或者多个记录的操作

#### 数据库构建和维护

> 材料数据包含了各种样品数据、研发数据和应用数据，各种数据之间的关系复杂，在数据库设计和优化方法方面都需要考虑数据的**存储方式、索引、关联和查询性能**等方面，来保证数据的高效存储和查询

#### 权限管理

> 材料数据包含各种敏感的信息，如部分实验记录、生成材料等信息，需要对用户权限进行管理

#### 接口设计

> 数据平台需要提供丰富的接口服务，包括**数据查询、数据提交、权限管理**等等。接口的设计需要考虑接口的安全性、可拓展性和兼容性等等方面

#### 前后端交互性能优化

> 材料数据平台需要实现前后端的额数据交互和展示，同时考虑到前端页面的性能优化，以提高用户体验和整体的性能
>
> 1. 采用懒加载（历史消息、模版）



### 相关技术

> 利用react+flask+mysql实现材料数据平台应用

1. 前端使用react框架（构建web界面的js库）进行开发，实现用户界面和交互逻辑，包括数据的查询和提交等操作
2. 后端使用flask框架（轻量级web框架）+flask-jwt flask-cors进行开发，提供数据服务的api接口，包括获取材料、实验数据和提交实验数据和提交词汇和模板等
3. 数据库采用mysql进行存储，通过SQLAlchemy等ORM（object relational mapping）框架进行数据管理和访问

前后端通过ajax请求（RESTful API-基于REST原则设计的web API，是一种设计风格）进行交互，前端通过发送请求获取后端数据，并将结果展示在用户界面上

为了提高性能和可靠性，可以采用缓存、负载均衡、容器化等技术进行优化



#### 项目结构

> 前端src+后端server+数据库管理migrations+测试tests

```python
material-app/
  README.md
  node_modules/
  package.json
  public/
    index.html
    favicon.ico
  src/
    components/
      SampleList.js
      ...
    pages/
      HomePage.js
      ...
    services/
      api.js
    utils/
      auth.js
      ...
    App.js
    index.js
    ...
  server/
    api/
      auth.py
      sample.py
      experiment.py
      ...
    models/
      user.py
      sample.py
      experiment.py
      ...
    config.py
    app.py
    ...
  migrations/
    ...
  tests/
    ...

```

**数据库迁移**

> 数据库迁移脚本是指对于数据库的结构、数据和版本进行变更，编写一组脚本，用户将数据库从一种状态转移到另一种状态
>
> 在对数据库进行修改和升级的时候，通过执行这些脚本，自动将数据库升级或者修改到目标状态
>
> **好处**
>
> 1. **保证数据的一致性和完整性：**记录数据库的变化的整个历史状态
> 2. **便于团队协作：**可以之间将数据库迁移保存下来
> 3. **方便测试和部署：**使用迁移脚本可以简化测试和部署的过程，避免手动修改数据库结构带来的风险和不确定性
> 4. **提高开发效率：**使用迁移脚本可以节省开发人员手动修改数据库结构的时间

